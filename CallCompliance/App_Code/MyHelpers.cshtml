@using System.DirectoryServices.AccountManagement


@helper UserFullName () {

string fullName = string.Empty;

    try {

        using (var context = new PrincipalContext (ContextType.Domain)) {
            var principal = UserPrincipal.FindByIdentity (context, User.Identity.Name);
            if (principal != null) {
                fullName = string.Format ("{0} {1}", principal.GivenName, principal.Surname);
                    @fullName
            }
        }
    } catch (Exception ex) {
        fullName = "Authentication failed";
        @fullName
    }
}
